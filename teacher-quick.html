<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™å¸ˆå¿«é€Ÿå¤‡è¯¾</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .header h1 { color: #667eea; font-size: 24px; }
        .main { display: grid; grid-template-columns: 280px 1fr; gap: 20px; }
        .sidebar, .content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .chapter-list { list-style: none; }
        .chapter-item {
            padding: 10px;
            margin-bottom: 8px;
            background: #f5f5f5;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .chapter-item:hover { background: #e0e0e0; }
        .chapter-item.active { background: #e7eaff; border-left: 3px solid #667eea; }
        .node-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .node-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        .node-card:hover { border-color: #667eea; transform: translateY(-2px); }
        .node-name { font-weight: 600; font-size: 15px; margin-bottom: 8px; color: #333; }
        .node-desc { font-size: 13px; color: #666; margin-bottom: 10px; line-height: 1.4; }
        .node-btns { display: flex; gap: 6px; }
        .btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary { background: #667eea; color: white; }
        .btn-primary:hover { background: #5568d3; }
        .btn-secondary { background: #e9ecef; color: #333; }
        .btn-secondary:hover { background: #dee2e6; }
        .back-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 15px;
            font-size: 13px;
        }
        .back-btn:hover { background: #e0e0e0; }
        .detail-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .detail-section h3 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .detail-section p { font-size: 14px; line-height: 1.6; color: #333; }
        .action-btns { margin-top: 20px; }
        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            margin-right: 10px;
        }
        .loading { text-align: center; padding: 40px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‘¨â€ğŸ« æ•™å¸ˆå¿«é€Ÿå¤‡è¯¾å·¥å…·</h1>
        </div>
        
        <div class="main">
            <div class="sidebar">
                <h3 style="margin-bottom: 15px; font-size: 16px;">ç« èŠ‚åˆ—è¡¨</h3>
                <ul class="chapter-list" id="chapterList">
                    <li class="loading">åŠ è½½ä¸­...</li>
                </ul>
            </div>
            
            <div class="content" id="content">
                <div style="text-align: center; padding: 60px 20px; color: #666;">
                    <h2 style="color: #667eea; margin-bottom: 15px;">æ¬¢è¿ä½¿ç”¨</h2>
                    <p>è¯·ä»å·¦ä¾§é€‰æ‹©ç« èŠ‚å¼€å§‹</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let nodes = [];
        let currentChapter = null;
        
        // åŠ è½½æ•°æ®
        async function loadData() {
            try {
                const response = await fetch('data/nodes.json');
                const data = await response.json();
                nodes = data;
                console.log('åŠ è½½äº†', nodes.length, 'ä¸ªèŠ‚ç‚¹');
                renderChapters();
            } catch (error) {
                console.error('åŠ è½½å¤±è´¥:', error);
                document.getElementById('chapterList').innerHTML = '<li style="color: red;">åŠ è½½å¤±è´¥</li>';
            }
        }
        
        // æ¸²æŸ“ç« èŠ‚åˆ—è¡¨
        function renderChapters() {
            const chapters = {};
            nodes.forEach(node => {
                const ch = node.chapter || 'å…¶ä»–';
                if (!chapters[ch]) chapters[ch] = [];
                chapters[ch].push(node);
            });
            
            const sorted = Object.keys(chapters).sort();
            const html = sorted.map(ch => 
                `<li class="chapter-item" onclick="showChapter('${ch}')">${ch} (${chapters[ch].length})</li>`
            ).join('');
            
            document.getElementById('chapterList').innerHTML = html;
        }
        
        // æ˜¾ç¤ºç« èŠ‚
        function showChapter(chapter) {
            currentChapter = chapter;
            const chNodes = nodes.filter(n => (n.chapter || 'å…¶ä»–') === chapter);
            
            const html = `
                <h2 style="margin-bottom: 20px; color: #667eea;">${chapter}</h2>
                <div class="node-grid">
                    ${chNodes.map(node => `
                        <div class="node-card">
                            <div class="node-name">${node.name}</div>
                            <div class="node-desc">${(node.description || 'æš‚æ— æè¿°').substring(0, 80)}...</div>
                            <div class="node-btns">
                                <button class="btn btn-primary" onclick="showDetail('${node.id}')">ğŸ“– è¯¦æƒ…</button>
                                <button class="btn btn-secondary" onclick="quickPlan('${node.id}')">ğŸ“ æ•™æ¡ˆ</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('content').innerHTML = html;
            
            // æ›´æ–°æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.chapter-item').forEach(item => {
                item.classList.remove('active');
                if (item.textContent.startsWith(chapter)) {
                    item.classList.add('active');
                }
            });
        }
        
        // æ˜¾ç¤ºè¯¦æƒ…
        function showDetail(id) {
            const node = nodes.find(n => n.id === id);
            if (!node) return;
            
            const html = `
                <button class="back-btn" onclick="showChapter('${currentChapter}')">â† è¿”å›</button>
                <h2 style="margin-bottom: 10px; color: #667eea;">${node.name}</h2>
                <p style="color: #999; margin-bottom: 20px; font-size: 14px;">${node.nameEn || ''}</p>
                
                <div class="detail-section">
                    <h3>ğŸ“ æè¿°</h3>
                    <p>${node.description || 'æš‚æ— æè¿°'}</p>
                </div>
                
                <div class="detail-section">
                    <h3>âš™ï¸ å‚æ•°</h3>
                    <p>éš¾åº¦: ${node.difficulty || 3}/5 | é‡è¦æ€§: ${node.importance || 3}/5</p>
                </div>
                
                <div class="action-btns">
                    <button class="action-btn btn-primary" onclick="generatePlan('${node.id}')">ğŸ“ ç”Ÿæˆå®Œæ•´æ•™æ¡ˆ</button>
                    <button class="action-btn btn-secondary" onclick="showChapter('${currentChapter}')">â† è¿”å›</button>
                </div>
            `;
            
            document.getElementById('content').innerHTML = html;
        }
        
        // å¿«é€Ÿæ•™æ¡ˆ
        function quickPlan(id) {
            const node = nodes.find(n => n.id === id);
            if (!node) return;
            
            const plan = `# æ•™æ¡ˆï¼š${node.name}

## æ•™å­¦ç›®æ ‡
- ç†è§£å¹¶æŒæ¡"${node.name}"çš„åŸºæœ¬æ¦‚å¿µ
- èƒ½å¤Ÿè¿ç”¨ç›¸å…³çŸ¥è¯†è§£å†³å®é™…é—®é¢˜

## çŸ¥è¯†ç‚¹æ¦‚è¿°
${node.description || 'æš‚æ— æè¿°'}

## æ•™å­¦é‡ç‚¹
- æ ¸å¿ƒæ¦‚å¿µçš„å‡†ç¡®ç†è§£
- å…¬å¼çš„æ¨å¯¼å’Œåº”ç”¨
- å®é™…é—®é¢˜çš„å»ºæ¨¡å’Œæ±‚è§£

## é¢„è®¡è¯¾æ—¶
${node.estimatedStudyTime || '2å°æ—¶'}

---
ç”Ÿæˆæ—¶é—´ï¼š${new Date().toLocaleString()}
`;
            
            downloadText(plan, `æ•™æ¡ˆ-${node.name}.md`);
            alert('âœ… æ•™æ¡ˆå·²ä¸‹è½½');
        }
        
        // ç”Ÿæˆå®Œæ•´æ•™æ¡ˆ
        function generatePlan(id) {
            const node = nodes.find(n => n.id === id);
            if (!node) return;
            
            const html = `
                <button class="back-btn" onclick="showDetail('${node.id}')">â† è¿”å›è¯¦æƒ…</button>
                <h2 style="margin-bottom: 20px; color: #667eea;">ğŸ“ æ•™æ¡ˆï¼š${node.name}</h2>
                
                <div class="detail-section">
                    <h3>ä¸€ã€æ•™å­¦ç›®æ ‡</h3>
                    <p>é€šè¿‡æœ¬èŠ‚è¯¾çš„å­¦ä¹ ï¼Œå­¦ç”Ÿåº”èƒ½å¤Ÿï¼š</p>
                    <ul style="margin-left: 20px; margin-top: 8px;">
                        <li>ç†è§£å¹¶æŒæ¡"${node.name}"çš„åŸºæœ¬æ¦‚å¿µå’Œå®šä¹‰</li>
                        <li>èƒ½å¤Ÿè¿ç”¨ç›¸å…³çŸ¥è¯†è§£å†³å®é™…é—®é¢˜</li>
                        <li>å»ºç«‹ä¸å…¶ä»–çŸ¥è¯†ç‚¹çš„è”ç³»</li>
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3>äºŒã€çŸ¥è¯†ç‚¹æ¦‚è¿°</h3>
                    <p>${node.description || 'æš‚æ— æè¿°'}</p>
                </div>
                
                <div class="detail-section">
                    <h3>ä¸‰ã€æ•™å­¦é‡ç‚¹</h3>
                    <ul style="margin-left: 20px;">
                        <li>æ ¸å¿ƒæ¦‚å¿µçš„å‡†ç¡®ç†è§£</li>
                        <li>å…¬å¼çš„æ¨å¯¼å’Œåº”ç”¨</li>
                        <li>å®é™…é—®é¢˜çš„å»ºæ¨¡å’Œæ±‚è§£</li>
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3>å››ã€é¢„è®¡è¯¾æ—¶</h3>
                    <p>${node.estimatedStudyTime || '2å°æ—¶'}</p>
                </div>
                
                <div class="action-btns">
                    <button class="action-btn btn-primary" onclick="exportFullPlan('${node.id}')">ğŸ’¾ å¯¼å‡ºæ•™æ¡ˆ</button>
                    <button class="action-btn btn-secondary" onclick="showDetail('${node.id}')">â† è¿”å›</button>
                </div>
            `;
            
            document.getElementById('content').innerHTML = html;
        }
        
        // å¯¼å‡ºå®Œæ•´æ•™æ¡ˆ
        function exportFullPlan(id) {
            const node = nodes.find(n => n.id === id);
            if (!node) return;
            
            const plan = `# æ•™æ¡ˆï¼š${node.name}

## ä¸€ã€æ•™å­¦ç›®æ ‡

é€šè¿‡æœ¬èŠ‚è¯¾çš„å­¦ä¹ ï¼Œå­¦ç”Ÿåº”èƒ½å¤Ÿï¼š

1. ç†è§£å¹¶æŒæ¡"${node.name}"çš„åŸºæœ¬æ¦‚å¿µå’Œå®šä¹‰
2. èƒ½å¤Ÿè¿ç”¨ç›¸å…³çŸ¥è¯†è§£å†³å®é™…é—®é¢˜
3. å»ºç«‹ä¸å…¶ä»–çŸ¥è¯†ç‚¹çš„è”ç³»
4. åŸ¹å…»æ•°å­¦æ€ç»´å’Œé—®é¢˜è§£å†³èƒ½åŠ›

**éš¾åº¦ç­‰çº§**: ${node.difficulty || 3}/5  
**é‡è¦æ€§**: ${node.importance || 3}/5

## äºŒã€çŸ¥è¯†ç‚¹æ¦‚è¿°

${node.description || 'æš‚æ— æè¿°'}

## ä¸‰ã€æ•™å­¦é‡ç‚¹

1. æ ¸å¿ƒæ¦‚å¿µçš„å‡†ç¡®ç†è§£
2. å…¬å¼çš„æ¨å¯¼å’Œåº”ç”¨
3. ä¸å…¶ä»–çŸ¥è¯†ç‚¹çš„è”ç³»
4. å®é™…é—®é¢˜çš„å»ºæ¨¡å’Œæ±‚è§£

## å››ã€æ•™å­¦æ–¹æ³•

1. **è®²æˆæ³•**: ç³»ç»Ÿè®²è§£æ ¸å¿ƒæ¦‚å¿µå’ŒåŸç†
2. **æ¼”ç¤ºæ³•**: åˆ©ç”¨çŸ¥è¯†å›¾è°±å±•ç¤ºçŸ¥è¯†å…³è”
3. **æ¡ˆä¾‹æ³•**: é€šè¿‡å®é™…æ¡ˆä¾‹åŠ æ·±ç†è§£
4. **è®¨è®ºæ³•**: ç»„ç»‡å­¦ç”Ÿè®¨è®ºï¼ŒåŸ¹å…»æ€ç»´èƒ½åŠ›
5. **ç»ƒä¹ æ³•**: é€šè¿‡ç»ƒä¹ å·©å›ºçŸ¥è¯†

## äº”ã€æ•™å­¦è¿‡ç¨‹

**é¢„è®¡å­¦ä¹ æ—¶é—´**: ${node.estimatedStudyTime || '2å°æ—¶'}

**æ—¶é—´åˆ†é…å»ºè®®**:
- å¯¼å…¥ä¸å¤ä¹ ï¼ˆ10åˆ†é’Ÿï¼‰ï¼šå¤ä¹ å‰ç½®çŸ¥è¯†ï¼Œå¼•å…¥æ–°è¯¾
- æ¦‚å¿µè®²è§£ï¼ˆ30åˆ†é’Ÿï¼‰ï¼šè®²è§£æ ¸å¿ƒæ¦‚å¿µå’Œå…¬å¼
- ä¾‹é¢˜æ¼”ç¤ºï¼ˆ30åˆ†é’Ÿï¼‰ï¼šé€šè¿‡ä¾‹é¢˜åŠ æ·±ç†è§£
- ç»ƒä¹ å·©å›ºï¼ˆ30åˆ†é’Ÿï¼‰ï¼šå­¦ç”Ÿç»ƒä¹ ï¼Œæ•™å¸ˆæŒ‡å¯¼
- æ€»ç»“æå‡ï¼ˆ10åˆ†é’Ÿï¼‰ï¼šæ€»ç»“è¦ç‚¹ï¼Œå¸ƒç½®ä½œä¸š

## å…­ã€å®é™…åº”ç”¨

æœ¬çŸ¥è¯†ç‚¹åœ¨ä»¥ä¸‹é¢†åŸŸæœ‰é‡è¦åº”ç”¨ï¼š

1. **å·¥ç¨‹æŠ€æœ¯**: åœ¨å®é™…å·¥ç¨‹é—®é¢˜ä¸­çš„åº”ç”¨
2. **ç§‘å­¦ç ”ç©¶**: åœ¨ç§‘å­¦ç ”ç©¶ä¸­çš„ä½œç”¨
3. **æ—¥å¸¸ç”Ÿæ´»**: ä¸æ—¥å¸¸ç”Ÿæ´»çš„è”ç³»

## ä¸ƒã€è¯¾åä½œä¸š

1. å¤ä¹ æœ¬èŠ‚è¯¾çš„æ ¸å¿ƒæ¦‚å¿µå’Œå…¬å¼
2. å®Œæˆè¯¾åç»ƒä¹ é¢˜ï¼ˆåŸºç¡€é¢˜5é“ï¼Œæé«˜é¢˜3é“ï¼‰
3. é¢„ä¹ ä¸‹ä¸€èŠ‚è¯¾å†…å®¹
4. æ€è€ƒï¼šæœ¬çŸ¥è¯†ç‚¹åœ¨å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨

## å…«ã€æ•™å­¦åæ€

ï¼ˆè¯¾åå¡«å†™ï¼‰

1. å­¦ç”Ÿå¯¹æ ¸å¿ƒæ¦‚å¿µçš„æŒæ¡æƒ…å†µ
2. æ•™å­¦æ–¹æ³•çš„æœ‰æ•ˆæ€§
3. å­¦ç”Ÿçš„å‚ä¸åº¦å’Œç§¯ææ€§
4. éœ€è¦æ”¹è¿›çš„åœ°æ–¹
5. ä¸‹æ¬¡è¯¾çš„è°ƒæ•´å»ºè®®

---

**ç”Ÿæˆæ—¶é—´**: ${new Date().toLocaleString()}  
**ç”Ÿæˆå·¥å…·**: é«˜ç­‰æ•°å­¦å­¦åŸŸçŸ¥è¯†å›¾è°±ç³»ç»Ÿ  
**è”ç³»æ–¹å¼**: 15805295231
`;
            
            downloadText(plan, `æ•™æ¡ˆ-${node.name}-${new Date().toISOString().split('T')[0]}.md`);
            alert('âœ… æ•™æ¡ˆå·²å¯¼å‡ºä¸º Markdown æ–‡ä»¶');
        }
        
        // ä¸‹è½½æ–‡æœ¬æ–‡ä»¶
        function downloadText(text, filename) {
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        loadData();
    </script>
</body>
</html>
